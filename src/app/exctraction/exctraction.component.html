<!--<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>-->


 <!---->
 <div style="background-color: #033F72 ">
  <div class="headliner">
    <br>
      <h1 class="miniText">
        narrArquivo
      </h1><br>
      <h1 class="miniText2">
        Crie e visualize  narrativas a partir de arquivos da web
      </h1>
    </div><br><br><br>
</div><br>
  <div *ngIf="result else textBox" >

    <div class="col-md-11 col-sm-8 col-xs-6 my-col2">
      <!--FRASE DOS TEMPOS DE EXECU√á√ÉO-->
      <span title=""><a class="frase1"></a></span>
      <!--FRASE DOS TEMPOS DE EXECU√á√ÉO-->
        <div>
      <div *ngIf="!result else graficos">
        <h1>N√£o foram encontrados dados, em caso de d√∫vida, a culpa √© da API ü§£</h1>
      </div>
        <ng-template #graficos >
          <mat-card>
          <mat-tab-group>
            <mat-tab  label="Texto Anotado">
                <br>
                <span>

                </span>
                <hr>
                <app-frame [argumentos]="result" [showOnlyRelevants]="showOnlyRel" [keywordsMatter]="withKeywords"  [docOrSentence]="byDocOrSentece?'doc':'sentence'" class="result"></app-frame>

                <hr>
                <div class="dateScoreColors">
                  <span><b>Escala Likert de {{!showOnlyRel?"5": "3"}} cores para representar a import√¢ncia das express√µes temporais:   </b></span>
                  <span class='{{!showOnlyRel?"black": "nonviewable"}}'>[0; 0.35]</span>
                  <span class='{{!showOnlyRel?"green": "nonviewable"}}' >]0.35; 0.5]</span>
                  <span class="blue">]0.5; 0.7]</span>
                  <span class="yellow">]0.7; 0.9]</span>
                  <span class="purple">]0.9; 1.0]</span>
                </div>
                <br>
                <!--ESTA AQUI O BOTAO NOVO, DEPOIS APAGA ESTE COMENTARIO-->
                <mat-slide-toggle class="afterAnnotated" [checked]="hiddenoptionKW" color="warn" (toggleChange)="toggleKeywords()">Keywords?</mat-slide-toggle>
                <br>
                <mat-slide-toggle class="afterAnnotated" (toggleChange)="toggleRel()" [checked]="showOnlyRel" color="warn" >Apenas datas relevantes?</mat-slide-toggle>
                <!--EM CIMA-->
                <br>
                <br>

          </mat-tab>

          <mat-tab label="Storyline" *ngIf="dataset.length>0 && result">
            <app-timeline-scroll  *ngIf=" result" [compGeral]="result" [docSen]="byDocOrSentece" [argumentosTodos]="datasetFixed" [argumentosRelevantes]="datasetFixed2"></app-timeline-scroll>

          </mat-tab>
          <mat-tab label="Agrupamento Temporal" *ngIf="dataset.length>0">

            <br>
            <div style="display: flex; justify-content: flex-end;">
              <mat-slide-toggle style="z-index: 10;margin-top:25px;margin-right: 50px ;" (toggleChange)='toggleRel()' [checked]="showOnlyRel" class="afterAnnotated" color="warn" >Apenas datas relevantes?</mat-slide-toggle>

            </div>
            <br><br>
            <div  *ngIf="!showOnlyRel else onlyRel">
              <div style="margin-top:-70px;" *ngIf="datasetFixed.length>0 else nodata1">
                <table class="table table-borderless">
                  <tbody *ngFor="let item of datasetFixed">
                    <tr >
                      <td><h3><b><strong>{{item.x}}</strong></b></h3></td><!--meter .substrin(0,10 para so ano)-->
                      <td class="TabelaTexto" [innerHTML]="item.y | safe:'html'"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <ng-template #nodata1>
                <h1>N√£o foram encontrados dados, em caso de d√∫vida, a culpa √© da API ü§£</h1>
              </ng-template>

            </div>

            <ng-template #onlyRel>
              <div style="margin-top:-70px;" *ngIf="datasetFixed2.length>0 else nodata2">
                <table class="table table-borderless">
                <tbody *ngFor="let item of datasetFixed2">
                  <tr >
                    <td ><h3><b><strong>{{item.x}}</strong></b></h3></td><!--meter .substrin(0,10 para so ano)-->
                    <td class="TabelaTexto"  [innerHTML]="item.y | safe:'html'"></td>
                </tr>
                </tbody>
              </table>

              </div>
              <ng-template #nodata2>
                <h1>N√£o foram encontrados dados, em caso de d√∫vida, a culpa √© da API ü§£</h1>
              </ng-template>

            </ng-template>

          <!--WIP-->
          </mat-tab>
          <mat-tab label="Nuvem de Palavras">
            <app-wordcloud [args]="result"></app-wordcloud>
          </mat-tab >






          </mat-tab-group>

        </mat-card>
          <br>
          <div class="col-lg-12 text-right">
            <button  mat-fab (click)="goBack()" class="btn btn-primary"><i class="fas fa-undo-alt"></i></button>

          </div>

        </ng-template>
      </div>


  </div>
</div>

<ng-template #textBox>

  <br/>
  <form (submit)="getKeyword($event)">
      <div class="col-md-11 col-sm-8 col-xs-6 my-col">

         <div class="col-lg-12">
            <div class="form-group">
              <mat-card>

                <mat-form-field class="example-full-width" >
                  <div class="col-lg-12 text-right" >
                    <span title="Example Texts"><button style="z-index: 10;margin-top:20px ;" class="btn btn-link" mat-button type="button" mat-icon-button [matMenuTriggerFor]="menuy" aria-label="Example icon-button with a menu">
                     <mat-icon >more_vert</mat-icon>
                  </button></span>
                  <mat-menu #menuy="matMenu">
                    <button (click)="setDefaultText(0,'English')" mat-menu-item>
                      <span>EN - haiti earthquake</span>
                    </button>
                    <div class="divider"></div>
                    <button (click)="setDefaultText(1,'French')"  mat-menu-item >
                      <span>FR - Politics</span>
                    </button>

                    <div class="divider"></div>
                    <button (click)="setDefaultText(3,'Portuguese')" mat-menu-item>
                      <span>PT - Politics </span>
                    </button>
                    <div class="divider"></div>
                    <button (click)="setDefaultText(4,'English')" mat-menu-item>
                      <span>EN - Bombings </span>
                    </button>
                  </mat-menu>
                  </div>
                  <mat-label>Criar narrativa a partir texto livre</mat-label>
                  <textarea matInput #texto class="text-area" (change)='setDefaultTexto(texto)' style="width:100%;" type="text" value="{{conteudoDefault}}" min_rows="4" rows="7" name="texto"></textarea>
                </mat-form-field>


                </mat-card>
              <!--
                EXTRA options
              -->
              <br>


              <!--OP√á√ïES A ADICIONAR-->

              <!--ACABA AQUI-->

            </div>
          </div>

          <div class="form-group"  style="z-index: 10;margin-top:-95px ;margin-right:6px ;">
            <div class="col-lg-12 text-right">
              <button mat-fab class="btn btn-primary" type="submit" [disabled]="loading" ><i class="fas fa-book-open" ></i>
                <div class='{{loading?"viewable": "nonviewable"}}'><span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  </div>
              </button>

             </div>
          </div>
      </div>

  </form>
</ng-template>

<br>
